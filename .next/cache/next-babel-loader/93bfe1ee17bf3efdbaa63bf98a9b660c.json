{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport WithDva from \"./store\";\nexport const WithComponent = (Components, initData) => {\n  Components.getInitialProps = async props => {\n    const {\n      pathname,\n      query,\n      isServer,\n      store\n    } = props;\n    let result = {}; // 扩展初始化数据\n\n    if (initData) {\n      result = await initData(props);\n    }\n\n    return _objectSpread({\n      pathname,\n      query,\n      isServer,\n      dvaStore: store\n    }, result);\n  };\n\n  return WithDva(state => ({\n    index: state.index\n  }))(Components);\n};","map":{"version":3,"sources":["E:/zsDir/nextjs-learn/utils/commonsStore.ts"],"names":["WithDva","WithComponent","Components","initData","getInitialProps","props","pathname","query","isServer","store","result","dvaStore","state","index"],"mappings":";;;;;;AAAA,OAAOA,OAAP;AAmBA,OAAO,MAAMC,aAAa,GAAG,CAACC,UAAD,EAS1BC,QAT0B,KASwE;AACjGD,EAAAA,UAAU,CAACE,eAAX,GAA6B,MAAOC,KAAP,IAA+B;AACxD,UAAM;AACFC,MAAAA,QADE;AACQC,MAAAA,KADR;AACeC,MAAAA,QADf;AACyBC,MAAAA;AADzB,QAEFJ,KAFJ;AAGA,QAAIK,MAA8B,GAAG,EAArC,CAJwD,CAKxD;;AACA,QAAIP,QAAJ,EAAc;AACVO,MAAAA,MAAM,GAAG,MAAMP,QAAQ,CAACE,KAAD,CAAvB;AACH;;AACD;AACIC,MAAAA,QADJ;AACcC,MAAAA,KADd;AACqBC,MAAAA,QADrB;AAC+BG,MAAAA,QAAQ,EAAEF;AADzC,OACmDC,MADnD;AAGH,GAZD;;AAaA,SAAOV,OAAO,CAAEY,KAAD,KAAY;AAAEC,IAAAA,KAAK,EAAED,KAAK,CAACC;AAAf,GAAZ,CAAD,CAAP,CAA6CX,UAA7C,CAAP;AACH,CAxBM","sourcesContent":["import WithDva from './store';\r\ninterface Initialprops {\r\n    pathname: string;\r\n    query: { [key: string]: any };\r\n    asPath: string;\r\n    req?: any;\r\n    res?: any;\r\n    err: string;\r\n    isServer: boolean;\r\n    store: { [key: string]: any }\r\n}\r\nexport interface Iprops {\r\n    index: { [key: string]: any };\r\n    query: { [key: string]: any };\r\n    pathname: string;\r\n    isServer: boolean;\r\n    dvaStore: any;\r\n    dispatch: (prop: { type: string, [key: string]: any }) => void;\r\n}\r\nexport const WithComponent = (Components: {\r\n    (props: any): JSX.Element;\r\n    getInitialProps?: (props: any) => Promise<{\r\n        [key: string]: any;\r\n        pathname: string;\r\n        query: { [key: string]: any };\r\n        isServer: boolean;\r\n        dvaStore: { [key: string]: any };\r\n    }>\r\n}, initData?: (props?: Initialprops) => Promise<{ [key: string]: any }> | { [key: string]: any }) => {\r\n    Components.getInitialProps = async (props: Initialprops) => {\r\n        const {\r\n            pathname, query, isServer, store,\r\n        } = props;\r\n        let result: { [key: string]: any } = {};\r\n        // 扩展初始化数据\r\n        if (initData) {\r\n            result = await initData(props);\r\n        }\r\n        return {\r\n            pathname, query, isServer, dvaStore: store, ...result\r\n        };\r\n    };\r\n    return WithDva((state) => ({ index: state.index }))(Components)\r\n}"]},"metadata":{},"sourceType":"module"}