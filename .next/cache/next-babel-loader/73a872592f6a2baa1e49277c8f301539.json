{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport WithDva from \"./store\";\nexport var WithComponent = function WithComponent(Components, initData) {\n  Components.getInitialProps = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(props) {\n      var pathname, query, isServer, store, result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              pathname = props.pathname, query = props.query, isServer = props.isServer, store = props.store; // await props.store.dispatch({ type: 'index/init' });\n\n              result = {};\n\n              if (!initData) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 5;\n              return initData(props);\n\n            case 5:\n              result = _context.sent;\n\n            case 6:\n              return _context.abrupt(\"return\", _objectSpread({\n                pathname: pathname,\n                query: query,\n                isServer: isServer,\n                dvaStore: store\n              }, result));\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return WithDva(function (state) {\n    return {\n      index: state.index\n    };\n  })(Components);\n};\n_c = WithComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"WithComponent\");","map":{"version":3,"sources":["E:/zsDir/nextjs-learn/utils/commonsStore.ts"],"names":["WithDva","WithComponent","Components","initData","getInitialProps","props","pathname","query","isServer","store","result","dvaStore","state","index"],"mappings":";;;;;;;;AAAA,OAAOA,OAAP;AACA,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,UAAD,EAS1BC,QAT0B,EAS+D;AACxFD,EAAAA,UAAU,CAACE,eAAX;AAAA,wEAA6B,iBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAErBC,cAAAA,QAFqB,GAGrBD,KAHqB,CAErBC,QAFqB,EAEXC,KAFW,GAGrBF,KAHqB,CAEXE,KAFW,EAEJC,QAFI,GAGrBH,KAHqB,CAEJG,QAFI,EAEMC,KAFN,GAGrBJ,KAHqB,CAEMI,KAFN,EAIzB;;AACIC,cAAAA,MALqB,GAKY,EALZ;;AAAA,mBAMrBP,QANqB;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAONA,QAAQ,CAACE,KAAD,CAPF;;AAAA;AAOrBK,cAAAA,MAPqB;;AAAA;AAAA;AAUrBJ,gBAAAA,QAAQ,EAARA,QAVqB;AAUXC,gBAAAA,KAAK,EAALA,KAVW;AAUJC,gBAAAA,QAAQ,EAARA,QAVI;AAUMG,gBAAAA,QAAQ,EAAEF;AAVhB,iBAU0BC,MAV1B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA7B;;AAAA;AAAA;AAAA;AAAA;;AAaA,SAAOV,OAAO,CAAC,UAACY,KAAD;AAAA,WAAY;AAAEC,MAAAA,KAAK,EAAED,KAAK,CAACC;AAAf,KAAZ;AAAA,GAAD,CAAP,CAA6CX,UAA7C,CAAP;AACH,CAxBM;KAAMD,a","sourcesContent":["import WithDva from './store';\r\nexport const WithComponent = (Components: {\r\n    (props: any): JSX.Element;\r\n    getInitialProps?: (props: any) => Promise<{\r\n        [key: string]: any;\r\n        pathname: any;\r\n        query: any;\r\n        isServer: any;\r\n        dvaStore: any;\r\n    }>\r\n}, initData?: (props?: any) => Promise<{ [key: string]: any }> | { [key: string]: any }) => {\r\n    Components.getInitialProps = async (props) => {\r\n        const {\r\n            pathname, query, isServer, store,\r\n        } = props;\r\n        // await props.store.dispatch({ type: 'index/init' });\r\n        let result: { [key: string]: any } = {};\r\n        if (initData) {\r\n            result = await initData(props);\r\n        }\r\n        return {\r\n            pathname, query, isServer, dvaStore: store, ...result\r\n        };\r\n    };\r\n    return WithDva((state) => ({ index: state.index }))(Components)\r\n}"]},"metadata":{},"sourceType":"module"}